# Обработчик Реестров

Автоматическая обработка файлов для информационного обмена с ТФОМС.

## Установка приложения

1. Установите на сервере [Node.js](https://nodejs.org/en/download).
2. Установите на сервере [JDK](https://jdk.java.net);
2. Скопировать файлы приложения в желаемую директорию.
3. Создайте в этой директории файл с именем ".env", указав необходимые параметры.
4. Запустите CLI (например Cmd.exe) и перейдите к директории с приложением.
5. Выполните команду `npm install` и дождитесь загрузки библиотек.

Для проверки реестров на соответствие стандартам обмена необходимо скопировать .xsd файлы в директорию schemas. Схемы можно скачать на сайте ТФОМС в разделе [Справочники тарифного соглашения](https://www.krasmed.ru/c_commission/references_qs.php).

### Команды для управления приложением

- `node fproc start` - запустить;
- `node fproc stop` - завершить;

### Параметры для ".env" файла

Чтобы задать параметр укажите в файле имя параметра и значение отделив их знаком "=". Значения не нужно обрамлять кавычками. Например, `PORT=4043`.

- `PORT` - порт прослушиваняи для приложения; обязательный параметр;
- `JAVA_HOME` - директория установки JDK; например `JAVA_HOME=c:\Program Files\Java\jdk-14.0.2`;
- `APIKEY` - ключ для доступа к API; если параметр задан, то часть действий будут требовать ключ;
- `CRYPTOKEY` - ключ для шифрования; используется для хранения пароля SMTP;
- `STARTINBOX` - Запускать обработку входящих файлов при запуске приложения; по умолчнию `true`;
- `STARTOUTBOX` - Запускать обработку отправленных файлов при запуске приложения; по умолчнию `true`;
- `STARTARCHIVE` - Запускать обработку архива реестров при запуске приложения; по умолчнию `true`;
- `STARTSENDERS` - Запускать обработку исходящих файлов при запуске приложения; по умолчнию `false`;
